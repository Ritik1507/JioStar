<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
</head>

<body>
    <nav class="navbar">
        <div class="logo"></div>
        <h1>JioStar Dashboard</h1>
    </nav>

    <div class="tab-nav">
        <button class="tab-btn active" data-tab="patch-tab">
            <i class="fa-solid fa-layer-group"></i> Patch Management
        </button>
        <button class="tab-btn" data-tab="computer-tab">
            <i class="fa-solid fa-desktop"></i> Computer Management
        </button>

        <button class="tab-btn" data-tab="envTab">
            <i class="fa-solid fa-clipboard-list"></i> Compliance by Environment
        </button>
        <button class="tab-btn" data-tab="osTab">
            <i class="fa-solid fa-server"></i> Compliance by OS
        </button>
    </div>

    <div class="container">

        <div id="patch-tab" class="tab-content active">
            <div class="filters">
                <div class="filter-row">
                    <div class="filter-group filter-lg">
                        <div class="custom-multiselect" id="severityMultiselect">
                            <div class="multiselect-trigger" tabindex="0" role="button" aria-haspopup="listbox">
                                <span class="multiselect-text">Severity</span>
                                <span class="multiselect-arrow"><i class="fa-solid fa-angle-down"></i></span>
                            </div>
                            <div class="multiselect-dropdown" role="listbox" aria-multiselectable="true">
                                <label><input type="checkbox" value="critical"> Critical</label>

                                <label><input type="checkbox" value="important"> Important</label>
                            </div>
                        </div>
                    </div>

                    <div class="filter-group filter-lg">
                        <div class="custom-select" data-id="group" data-value="">
                            <div class="select-trigger" tabindex="0" role="button" aria-haspopup="listbox"
                                aria-expanded="false">
                                <span class="select-text">Group</span>
                                <span class="arrow"><i class="fa-solid fa-angle-down"></i></span>
                            </div>
                            <div class="select-dropdown" role="listbox">
                                <div data-value="">All</div>
                                <div data-value="servers">Servers</div>
                                <div data-value="workstations">Workstations</div>
                                <div data-value="laptops">Laptops</div>
                            </div>
                        </div>
                    </div>

                    <div class="filter-group filter-lg">
                        <div class="custom-input custom-date-wrapper">
                            <input type="text" id="dateFrom" class="date-input" placeholder="dd-mm-yyyy" readonly>
                            <label for="dateFrom">From</label>
                            <i class="fa-solid fa-calendar-days calendar-icon"></i>
                        </div>
                    </div>

                    <div class="filter-group filter-lg">
                        <div class="custom-input custom-date-wrapper">
                            <input type="text" id="dateTo" class="date-input" placeholder="dd-mm-yyyy" readonly>
                            <label for="dateTo">To</label>
                            <i class="fa-solid fa-calendar-days calendar-icon"></i>
                        </div>
                    </div>

                    <div class="filter-group">
                        <button class="btn btn-primary" id="applyBtn">Apply</button>
                    </div>
                    <div class="filter-group">
                        <button class="btn btn-secondary" id="resetBtn">Reset</button>
                    </div>
                </div>
            </div>


            <div class="dashboard-row">

                <!-- Left: 4 KPI Cards -->
                <div class="kpi-cards-container">
                    <div class="kpi-card">
                        <div class="kpi-icon icon-total">
                            <i class="fa-solid fa-desktop"></i>
                        </div>
                        <div class="kpi-content">
                            <div class="kpi-label">Total Devices</div>
                            <div class="kpi-value" id="totalDevicesValue">0</div>
                        </div>
                    </div>

                    <div class="kpi-card">
                        <div class="kpi-icon icon-compliance">
                            <i class="fa-solid fa-square-check"></i>
                        </div>
                        <div class="kpi-content">
                            <div class="kpi-label">Compliance % (Remediated)</div>
                            <div class="kpi-value" id="compliancePercentageValue">0%</div>
                        </div>
                    </div>

                    <div class="kpi-card" id="kpiCriticalNonComp">
                        <div class="kpi-icon icon-pending">
                            <i class="fa-solid fa-triangle-exclamation"></i>
                        </div>
                        <div class="kpi-content">
                            <div class="kpi-label">Critical patch (non-compliant)</div>
                            <div class="kpi-value" id="CriticalNonComp">0</div>
                        </div>
                    </div>

                    <div class="kpi-card" id="kpiImportantNonComp">
                        <div class="kpi-icon icon-failed">
                            <i class="fa-solid fa-clock"></i>
                        </div>
                        <div class="kpi-content">
                            <div class="kpi-label">Important patch (non-compliant)</div>
                            <div class="kpi-value" id="importantNonComp">0</div>
                        </div>
                    </div>
                </div>

                <!-- Right: Bar Graph -->
                <div class="bar-graph-container">
                    <canvas id="monthlyComplianceChart"></canvas>
                </div>

            </div>



            <div class="table-container">
                <div class="table-header">
                    <h2>Patch Management</h2>
                </div>

                <div class="table-controls-row">
                    <div class="table-controls">
                        <div class="custom-select" data-id="status" data-value="">
                            <div class="select-trigger" tabindex="0" role="button" aria-haspopup="listbox"
                                aria-expanded="false">
                                <span class="select-text">Status</span>
                                <span class="arrow"><i class="fa-solid fa-angle-down"></i></span>
                            </div>
                            <div class="select-dropdown" role="listbox">
                                <div data-value="">All</div>
                                <div data-value="outstanding">Outstanding</div>
                                <div data-value="remediated">Remediated</div>
                            </div>
                        </div>

                        <div class="custom-select" data-id="severity2" data-value="">
                            <div class="select-trigger" tabindex="0" role="button" aria-haspopup="listbox"
                                aria-expanded="false">
                                <span class="select-text">Severity</span>
                                <span class="arrow"><i class="fa-solid fa-angle-down"></i></span>
                            </div>
                            <div class="select-dropdown" role="listbox">
                                <div data-value="">All</div>
                                <div data-value="critical">Critical</div>

                                <div data-value="important">Important</div>
                            </div>
                        </div>

                        <button class="btn btn-tertiary" id="exportCsvBtn">Export </button>

                        <div class="search-wrapper">
                            <input type="text" id="search" placeholder="Search...">
                            <span class="search-icon"><i class="fa-solid fa-magnifying-glass"></i></span>
                            <span id="clearSearch" class="clear-btn"><i class="fa-solid fa-eraser"></i></span>
                            <div id="searchSpinner" class="spinner hidden"></div>
                        </div>
                    </div>
                </div>

                <table id="dataTable">
                    <thead>
                        <tr>
                            <th>Patch Name</th>
                            <th>Severity</th>
                            <th>Computer Name</th>
                            <th>From</th>
                            <th>To</th>
                            <th>Release Date</th>
                            <th>Responsibility/Owner</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody id="tableBody">
                        <tr>
                            <td colspan="8" class="empty-state">
                                <div class="empty-state-icon"><i class="fa-solid fa-table"></i></div>
                                <div>No data available. Apply filters to load data.</div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="pagination-container" id="paginationContainer"></div>
        </div>

        <div id="computer-tab" class="tab-content">

            <div class="filters">
                <div class="filter-row">
                    <div class="filter-group filter-lg">
                        <div class="custom-input">
                            <input type="number" id="compDaysInput" placeholder="Days">
                            <label for="compDaysInput">Days</label>
                        </div>
                    </div>

                    <div class="filter-group filter-lg">
                        <div class="custom-select" id="compGroupSelect" data-id="comp-group" data-value="">
                            <div class="select-trigger" tabindex="0" role="button" aria-haspopup="listbox"
                                aria-expanded="false">
                                <span class="select-text">Computer Group</span>
                                <span class="arrow"><i class="fa-solid fa-angle-down"></i></span>
                            </div>
                            <div class="select-dropdown" role="listbox">
                                <div data-value="">All</div>
                                <div data-value="laptop">Laptop</div>
                                <div data-value="server">Server</div>
                                <div data-value="workstation">Workstation</div>
                            </div>
                        </div>
                    </div>

                    <div class="filter-group">
                        <button class="btn btn-primary" id="compApplyBtn">Apply</button>
                    </div>
                    <div class="filter-group">
                        <button class="btn btn-secondary" id="compResetBtn">Reset</button>
                    </div>
                </div>
            </div>

            <div class="computer-tab-kpi-wrapper">

                <!-- LEFT SIDE: KPI CARDS -->
                <div class="computer-kpi-cards">

                    <!-- TOTAL DEVICES -->
                    <div class="computer-kpi-card">
                        <div class="computer-kpi-icon icon-total-devices">
                            <i class="fa-solid fa-desktop"></i>
                        </div>
                        <div class="computer-kpi-content">
                            <div class="computer-kpi-label">Total Devices</div>
                            <div class="computer-kpi-value" id="compTotalDevices">0</div>
                        </div>
                    </div>

                    <!-- ONLINE DEVICES -->
                    <div class="computer-kpi-card">
                        <div class="computer-kpi-icon icon-online-devices">
                            <i class="fa-solid fa-wifi"></i>
                        </div>
                        <div class="computer-kpi-content">
                            <div class="computer-kpi-label">Online</div>
                            <div class="computer-kpi-value" id="compOnlineDevices">0</div>
                        </div>
                    </div>

                    <!-- OFFLINE DEVICES -->
                    <div class="computer-kpi-card">
                        <div class="computer-kpi-icon icon-offline-devices">
                            <i class="fa-solid fa-power-off"></i>
                        </div>
                        <div class="computer-kpi-content">
                            <div class="computer-kpi-label">Offline</div>
                            <div class="computer-kpi-value" id="compOfflineDevices">0</div>
                        </div>
                    </div>

                </div>

                <!-- RIGHT SIDE: CHART -->
                <div class="computer-chart-wrapper">
                    <canvas id="computerStatusChart"></canvas>
                </div>

            </div>


            <div class="table-container">
                <div class="table-header">
                    <h2>Computer Management</h2>
                </div>

                <div class="table-controls-row">
                    <div class="table-controls">
                        <div class="custom-select" id="compStatusSelect" data-id="comp-status" data-value="">
                            <div class="select-trigger" tabindex="0" role="button" aria-haspopup="listbox"
                                aria-expanded="false">
                                <span class="select-text">Status (All)</span>
                                <span class="arrow"><i class="fa-solid fa-angle-down"></i></span>
                            </div>
                            <div class="select-dropdown" role="listbox">
                                <div data-value="">All</div>
                                <div data-value="Online">Online</div>
                                <div data-value="Offline">Offline</div>
                            </div>
                        </div>

                        <button class="btn btn-tertiary" id="compExportBtn">Export</button>

                        <div class="search-wrapper">
                            <input type="text" id="compSearchInput" placeholder="Search computers...">
                            <span class="search-icon"><i class="fa-solid fa-magnifying-glass"></i></span>


                            <span id="compSearchClear" class="clear-btn"><i class="fa-solid fa-eraser"></i></span>


                            <span id="compSearchSpinner" class="spinner hidden"></span>
                        </div>

                    </div>
                </div>

                <table id="compDataTable">
                    <thead>
                        <tr>
                            <th>Computer Name</th>
                            <th>Last Seen</th>
                            <th>Days Offline</th>
                            <th>IP Addresses</th>
                            <th>Operating System</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody id="compTableBody">
                        <tr>
                            <td colspan="6" class="empty-state">
                                <div class="empty-state-icon"><i class="fa-solid fa-table"></i></div>
                                <div>No data available. Apply filters to load data.</div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="pagination-container" id="compPaginationContainer"></div>
        </div>

        <!-- ============================================================ -->
        <!-- TAB 3: COMPLIANCE BY ENVIRONMENT -->
        <!-- ============================================================ -->
        <div id="envTab" class="tab-content">

            <div class="env-filter-section">

                <div class="env-filter-group">
                    <label for="envDateFrom">From</label>
                    <div class="custom-input custom-date-wrapper">
                        <input type="text" id="envDateFrom" class="date-input" placeholder="dd-mm-yyyy" readonly>
                        <i class="fa-solid fa-calendar-days calendar-icon"></i>
                    </div>
                </div>

                <div class="env-filter-group">
                    <label for="envDateTo">To</label>
                    <div class="custom-input custom-date-wrapper">
                        <input type="text" id="envDateTo" class="date-input" placeholder="dd-mm-yyyy" readonly>
                        <i class="fa-solid fa-calendar-days calendar-icon"></i>
                    </div>
                </div>

                <button class="env-apply-btn" id="envApplyBtn">Apply</button>
            </div>

            <div class="env-chart-wrapper">
                <div class="env-chart-title">Compliance Percentage by Environment</div>

                <!-- FIXED: Added ID -->
                <div class="env-chart-container" id="envChartContainer">
                    <canvas id="envComplianceChart"></canvas>
                </div>
            </div>

            <div class="env-table-wrapper">
                <div class="env-table-header">
                    <div class="env-table-title">Environment Details</div>
                    <div class="env-selected-env" id="envSelectedEnv" style="display: none;"></div>
                </div>

                <div class="env-empty-state" id="envEmptyState">
                    <p>No environment selected</p>
                    <small>Click on any bar in the chart above to view detailed compliance data</small>
                </div>

                <table id="envDetailsTable" class="env-details-table">
                    <thead>
                        <tr>
                            <th>Patch Name</th>
                            <th>Severity</th>
                            <th>Computer Name</th>
                            <th>From</th>
                            <th>To</th>
                            <th>Release Date</th>
                            <th>Responsibility/Owner</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody id="envTableBody"></tbody>
                </table>
            </div>

        </div>


        <!-- ============================================================ -->
        <!-- TAB 4: COMPLIANCE BY OPERATING SYSTEM -->
        <!-- ============================================================ -->
        <!-- ============================================================ -->
        <!-- TAB 4: COMPLIANCE BY OS -->
        <!-- ============================================================ -->
        <div id="osTab" class="tab-content">

            <div class="os-filter-section">

                <div class="os-filter-group">
                    <label for="osDateFrom">From</label>
                    <div class="custom-input custom-date-wrapper">
                        <input type="text" id="osDateFrom" class="date-input" placeholder="dd-mm-yyyy" readonly>
                        <i class="fa-solid fa-calendar-days calendar-icon"></i>
                    </div>
                </div>

                <div class="os-filter-group">
                    <label for="osDateTo">To</label>
                    <div class="custom-input custom-date-wrapper">
                        <input type="text" id="osDateTo" class="date-input" placeholder="dd-mm-yyyy" readonly>
                        <i class="fa-solid fa-calendar-days calendar-icon"></i>
                    </div>
                </div>

                <button class="os-apply-btn" id="osApplyBtn">Apply</button>
            </div>

            <div class="os-chart-wrapper">
                <div class="os-chart-title">Compliance Percentage by Operating System</div>

                <div class="os-chart-container" id="osChartContainer">
                    <canvas id="osComplianceChart"></canvas>
                </div>
            </div>

            <div class="os-table-wrapper">
                <div class="os-table-header">
                    <div class="os-table-title">OS Compliance Details</div>
                    <div class="os-selected-os" id="osSelectedOS" style="display: none;"></div>
                </div>

                <div class="os-empty-state" id="osEmptyState">
                    <p>No OS selected</p>
                    <small>Click on any bar in the chart above to view detailed compliance data</small>
                </div>

                <table id="osDetailsTable" class="os-details-table">
                    <thead>
                        <tr>
                            <th>Patch Name</th>
                            <th>Severity</th>
                            <th>Computer Name</th>
                            <th>From</th>
                            <th>To</th>
                            <th>Release Date</th>
                            <th>Responsibility/Owner</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody id="osTableBody"></tbody>
                </table>
            </div>

        </div>


        <div id="datePickerPopup"></div>

    </div>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="script.js"></script>


</body>

</html>